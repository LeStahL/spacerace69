/* Generated with shader-compressor by NR4/Team210. */
#ifndef SFX_H
#define SFX_H
const char * sfx_frag =
"#version 130\n"
"const float PI = radians(180.);\n"
"const float TAU = 2.*PI;\n"
"float clip(float a) { return clamp(a,-1.,1.); }\n"
"float smstep(float a, float b, float x) {return smoothstep(a, b, clamp(x, a, b));}\n"
"float theta(float x) { return smstep(0.,1e-3,x); }\n"
"float _sin(float a) { return sin(TAU * mod(a,1.)); }\n"
"float _sin_(float a, float p) { return sin(TAU * mod(a,1.) + p); }\n"
"float _sq_(float a,float pwm) { return sign(2.*fract(a) - 1. + pwm); }\n"
"float _tri(float a) { return (4.*abs(fract(a)-.5) - 1.); }\n"
"float freqC1(float note){ return 32.7 * exp2(note/12.); }\n"
"float minus1hochN(int n) { return (1. - 2.*float(n % 2)); }\n"
"float minus1hochNminus1halbe(int n) { return sin(.5*PI*float(n)); }\n"
"float pseudorandom(float x) { return fract(sin(dot(vec2(x),vec2(12.9898,78.233))) * 43758.5453); }\n"
"float fhelp(float x) { return 1. + .333*x; } // 1. + .33333*x + .1*x*x + .02381*x*x*x + .00463*x*x*x*x;\n"
"float linmix(float x, float a, float b, float y0, float y1) { return mix(y0,y1,clamp(a*x+b,0.,1.)); }\n"
"float s_atan(float a) { return .636 * atan(a); }\n"
"float doubleslope(float t, float a, float d, float s) { return smstep(-.00001,a,t) - (1.-s) * smstep(0.,d,t-a); }\n"
"\n"
"#define NTIME 12\n"
"const float pos_B[12] = float[12](0.,56.,58.,60.,62.,64.,74.,78.,82.,86.,90.,97.);\n"
"const float pos_t[12] = float[12](0.,108.3871,112.1966,115.9466,119.6389,123.2753,141.1857,148.4585,155.8431,163.5059,171.3748,185.3748);\n"
"const float pos_BPS[11] = float[11](.5167,.525,.5333,.5417,.55,.5583,.55,.5417,.522,.5083,.5);\n"
"const float pos_SPB[11] = float[11](1.9354,1.9048,1.8751,1.846,1.8182,1.7912,1.8182,1.846,1.9157,1.9673,2.);\n"
"float BPS, SPB, BT;\n"
"\n"
"float Tsample;\n"
"\n"
"#define filterthreshold 1.e-3\n"
"\n"
"//TEXCODE\n"
"\n"
"float drop_phase(float time, float t1, float f0, float f1)\n"
"{\n"
"    float t = min(time, t1);\n"
"    float phi = f0*t + .5*(f1-f0)/t1*t*t;\n"
"\n"
"    if(time > t1)\n"
"    {\n"
"        phi += f1 * (time - t1);\n"
"    }\n"
"    return phi;\n"
"}\n"
"\n"
"float metalnoise(float t, float fac1, float fac2)\n"
"{\n"
"    return .666*pseudorandom(t) - 1.333*pseudorandom(t-Tsample) + .333*(pseudorandom(t+fac1*Tsample)+pseudorandom(t+fac2*Tsample));\n"
"}\n"
"\n"
"float lpnoise(float t, float fq)\n"
"{\n"
"    t *= fq;\n"
"    float tt = fract(t);\n"
"    float tn = t - tt;\n"
"    return mix(pseudorandom(floor(tn) / fq), pseudorandom(floor(tn + 1.0) / fq), smstep(0.0, 1.0, tt));\n"
"}\n"
"\n"
"float reverb_phase(float t, float amt)\n"
"{\n"
"    float r = lpnoise(t, 100.0) + 0.2*lpnoise(t, 550.0) + 0.1*lpnoise(t, 1050.0)*exp(-5.*t);\n"
"    return amt * r;\n"
"}\n"
"\n"
"float env_AHDSR(float x, float L, float A, float H, float D, float S, float R)\n"
"{\n"
"    return (x<A ? x/A : x<A+H ? 1. : x<A+H+D ? (1. - (1.-S)*(x-H-A)/D) : x<=L-R ? S : x<=L ? S*(L-x)/R : 0.);\n"
"}\n"
"\n"
"float env_AHDSRexp(float x, float L, float A, float H, float D, float S, float R)\n"
"{\n"
"    float att = pow(x/A,8.);\n"
"    float dec = S + (1.-S) * exp(-(x-H-A)/D);\n"
"    float rel = (x <= L-R) ? 1. : pow((L-x)/R,4.);\n"
"    return (x < A ? att : x < A+H ? 1. : dec) * rel;\n"
"}\n"
"\n"
"float sinshape(float x, float amt, float parts)\n"
"{\n"
"    return (1.-amt) * x + amt * sign(x) * 0.5 * (1. - cos(parts*PI*x));\n"
"}\n"
"\n"
"float comp_SAW(int N, float inv_N, float PW) {return inv_N * (1. - _sin(float(N)*PW));}\n"
"float comp_TRI(int N, float inv_N, float PW) {return N % 2 == 0 ? .1 * inv_N * _sin(float(N)*PW) : inv_N * inv_N * (1. - _sin(float(N)*PW));}\n"
"float comp_SQU(int N, float inv_N, float PW) {return inv_N * (minus1hochN(N) * _sin(.5*float(N)*PW + .25) - 1.);}\n"
"float comp_HAE(int N, float inv_N, float PW) {return N % 2 == 0 ? 0. : inv_N * (1. - minus1hochNminus1halbe(N))*_sin(PW);}\n"
"float comp_OBO(int N, float inv_N, float PW) {return sqrt(inv_N) * (1. + _sin(float(N)*(1.5+PW)+.5*PI));}\n"
"\n"
"float MADD(float t, float f, float p0, int NMAX, int NINC, float MIX, float CO, float NDECAY, float RES, float RES_Q, float DET, float PW, float LOWCUT, int keyF)\n"
"{\n"
"    float ret = 0.;\n"
"    float INR = keyF==1 ? 1./CO : f/CO;\n"
"    float IRESQ = keyF==1 ? 1./RES_Q : 1./(RES_Q*f);\n"
"\n"
"    float p = f*t;\n"
"    float float_N, inv_N, comp_mix, filter_N;\n"
"    for(int N = 1 + int(LOWCUT/f - 1.e-3); N<=NMAX; N+=NINC)\n"
"    {\n"
"        float_N = float(N);\n"
"        inv_N = 1./float_N;\n"
"        comp_mix = MIX < -1. ? (MIX+2.) * comp_SAW(N,inv_N,PW)  - (MIX+1.) * comp_OBO(N,inv_N,PW)\n"
"                 : MIX <  0. ? (MIX+1.) * comp_TRI(N,inv_N,PW)  -     MIX  * comp_SAW(N,inv_N,PW)\n"
"                 : MIX < 1. ? (1.-MIX) * comp_TRI(N,inv_N,PW)  +     MIX  * comp_SQU(N,inv_N,PW)\n"
"                            : (MIX-1.) * comp_HAE(N,inv_N,PW)  + (2.-MIX) * comp_SQU(N,inv_N,PW);\n"
"\n"
"        if(abs(comp_mix) < 1e-4) continue;\n"
"\n"
"        filter_N = pow(1. + pow(float_N*INR,NDECAY),-.5) + RES * exp(-pow((float_N*f-CO)*IRESQ,2.));\n"
"\n"
"        ret += comp_mix * filter_N * (_sin_(float_N * p, p0) + _sin_(float_N * p * (1.+DET), p0));\n"
"    }\n"
"    return s_atan(ret);\n"
"}\n"
"\n"
"float MADD(float t, float f, float p0, int NMAX, int NINC, float MIX, float CO, float NDECAY, float RES, float RES_Q, float DET, float PW, int keyF)\n"
"{\n"
"    return MADD(t, f, p0, NMAX, NINC, MIX, CO, NDECAY, RES, RES_Q, DET, PW, 0., keyF);\n"
"}\n"
"\n"
"float QFM_FB(float PH, float FB) // my guessing of feedback coefficients, FB>0 'saw', FB<0 'sq'\n"
"{\n"
"    if(FB > 0.) return abs(FB) * .8*_sin(PH + .35*_sin(PH));\n"
"    else return abs(FB) * _sin(PH + .5*PI);\n"
"}\n"
"\n"
"float QFM(float t, float f, float phase, float LV1, float LV2, float LV3, float LV4, float FR1, float FR2, float FR3, float FR4, float FB1, float FB2, float FB3, float FB4, float ALGO)\n"
"{\n"
"    int iALGO = int(ALGO);\n"
"    float PH1 = FR1 * f * t + phase;\n"
"    float PH2 = FR2 * f * t + phase;\n"
"    float PH3 = FR3 * f * t + phase;\n"
"    float PH4 = FR4 * f * t + phase;\n"
"\n"
"    float LINK41 = 0., LINK42 = 0., LINK43 = 0., LINK32 = 0., LINK31 = 0., LINK21 = 0.;\n"
"    if(iALGO == 1)       {LINK43 = 1.; LINK32 = 1.; LINK21 = 1.;}\n"
"    else if(iALGO == 2)  {LINK42 = 1.; LINK32 = 1.; LINK21 = 1.;}\n"
"    else if(iALGO == 3)  {LINK41 = 1.; LINK32 = 1.; LINK21 = 1.;}\n"
"    else if(iALGO == 4)  {LINK42 = 1.; LINK43 = 1.; LINK31 = 1.; LINK21 = 1.;}\n"
"    else if(iALGO == 5)  {LINK41 = 1.; LINK31 = 1.; LINK21 = 1.;}\n"
"    else if(iALGO == 6)  {LINK43 = 1.; LINK32 = 1.;}\n"
"    else if(iALGO == 7)  {LINK43 = 1.; LINK32 = 1.; LINK31 = 1.;}\n"
"    else if(iALGO == 8)  {LINK21 = 1.; LINK43 = 1.;}\n"
"    else if(iALGO == 9)  {LINK43 = 1.; LINK42 = 1.; LINK41 = 1.;}\n"
"    else if(iALGO == 10) {LINK43 = 1.; LINK42 = 1.;}\n"
"    else if(iALGO == 11) {LINK43 = 1.;}\n"
"\n"
"    float OP4 = LV4 * _sin(PH4 + QFM_FB(PH4, FB4));\n"
"    float OP3 = LV3 * _sin(PH3 + QFM_FB(PH3, FB3) + LINK43*OP4);\n"
"    float OP2 = LV2 * _sin(PH2 + QFM_FB(PH2, FB2) + LINK42*OP4 + LINK32*OP3);\n"
"    float OP1 = LV1 * _sin(PH1 + QFM_FB(PH1, FB1) + LINK41*OP4 + LINK31*OP3 + LINK32*OP2);\n"
"\n"
"    float sum = OP1;\n"
"    if(LINK21 > 0.) sum += OP2;\n"
"    if(LINK31 + LINK32 > 0.) sum += OP3;\n"
"    if(LINK41 + LINK42 + LINK43 > 0.) sum += OP4;\n"
"\n"
"    return s_atan(sum);\n"
"}\n"
"\n"
"float protokick(float t, float f_start, float f_end, float fdecay, float hold, float decay, float drive, float detune, float rev_amount, float rev_hold, float rev_decay, float rev_drive)\n"
"{\n"
"    float phi = drop_phase(t, fdecay, f_start, f_end);\n"
"    float rev_phi = phi + reverb_phase(t, 1.);\n"
"    return clamp(drive*.5*(_sin(phi)+_sin((1.-detune)*phi)),-1.,1.) * exp(-max(t-hold, 0.)/decay)\n"
"         + rev_amount*clamp(rev_drive*.5*(_sin(rev_phi)+_sin((1.-detune)*rev_phi)),-1.,1.) * exp(-max(t-rev_hold, 0.)/rev_decay);\n"
"}\n"
"\n"
"float _BOOMENV0(float t){return t <=.019? linmix(t,52.6316,0.,0.,1.):t <=.244? linmix(t,4.4444,-.0844,1.,.274):t <=1.2? linmix(t,1.046,-.2552,.274,0.):0.;}\n"
"float _BOOMENV1(float t){return t <=.147? linmix(t,6.8027,0.,0.,1.):t <=.488? linmix(t,2.9326,-.4311,1.,.417):t <=1.058? linmix(t,1.7544,-.8561,.417,0.):0.;}\n"
"float _BOOMENV2(float t){return t <=.259? linmix(t,3.861,0.,0.,1.):t <=.868? linmix(t,1.642,-.4253,1.,.464):t <=1.947? linmix(t,.9268,-.8044,.464,0.):0.;}\n"
"float _BOOMENV3(float t){return t <=.62? linmix(t,1.6129,0.,0.,1.):t <=1.899? linmix(t,.7819,-.4848,1.,0.):0.;}\n"
"float fqmbace5_volume(float B)\n"
"{\n"
"    return B<0 ? 0. : (B>=0. && B<2.) ? 0. : (B>=2. && B<6.) ? linmix(B, .25, -.5, 0.0, 1.0) : (B>=14. && B<15.5) ? linmix(B, .6667, -9.3333, 1.0, 0.1) : (B>=15.5 && B<16.) ? linmix(B, 2., -31., 0.1, 0.05) : (B>=16. && B<32.) ? 1.1 : 1.;\n"
"}\n"
"float fqmbace7sat_vol(float B)\n"
"{\n"
"    return B<0 ? 0. : (B>=0. && B<2.5) ? linmix(B, .4, 0., 0.0, 1.0) : (B>=15. && B<16.) ? linmix(B, 1., -15., 1.0, 0.1) : (B>=80. && B<88.) ? 1.5 : (B>=88. && B<98.) ? linmix(B, .1, -8.8, 1.5, 0.0) : 1.;\n"
"}\n"
"float fett2_volume(float B)\n"
"{\n"
"    return B<0 ? 0. : (B>=0. && B<5.) ? linmix(B, .2, 0., 0.1, 0.9) : (B>=8. && B<11.) ? linmix(B, .3333, -2.6667, 0.9, 0.05) : (B>=11. && B<14.) ? linmix(B, .3333, -3.6667, 0.4, 1.0) : (B>=14. && B<16.) ? linmix(B, .5, -7., 1.0, 0.1) : (B>=56. && B<62.) ? linmix(B, .1667, -9.3333, 1.0, 0.66) : (B>=62. && B<67.) ? linmix(B, .2, -12.4, 0.66, 1.0) : (B>=80. && B<84.) ? linmix(B, .25, -20., 0.76, 1.0) : (B>=91. && B<98.) ? linmix(B, .1429, -13., 1.0, 0.0) : 1.;\n"
"}\n"
"float hoboe_vol(float B)\n"
"{\n"
"    return B<0 ? 0. : (B>=0. && B<4.) ? linmix(B, .25, 0., 0.21, 1.1) : (B>=4. && B<15.) ? 1.1 : (B>=15. && B<16.) ? linmix(B, 1., -15., 1.1, 0.4) : 1.;\n"
"}\n"
"\n"
"uniform float iBlockOffset;\n"
"uniform float iSampleRate;\n"
"uniform float iTexSize;\n"
"uniform sampler2D iSequence;\n"
"uniform float iSequenceWidth;\n"
"\n"
"// Read short value from texture at index off\n"
"float rshort(in float off)\n"
"{\n"
"    float hilo = mod(off, 2.);\n"
"    off = .5*off;\n"
"    vec2 ind = vec2(mod(off, iSequenceWidth), floor(off/iSequenceWidth));\n"
"    vec4 block = texelFetch(iSequence, ivec2(ind), 0);\n"
"    vec2 data = mix(block.rg, block.ba, hilo);\n"
"    return round(dot(vec2(255., 65280.), data));\n"
"}\n"
"\n"
"// Read float value from texture at index off\n"
"float rfloat(int off)\n"
"{\n"
"    float d = rshort(float(off));\n"
"    float sign = floor(d/32768.),\n"
"        exponent = floor(d*9.765625e-4 - sign*32.),\n"
"        significand = d-sign*32768.-exponent*1024.;\n"
"\n"
"    if(exponent == 0.)\n"
"         return mix(1., -1., sign) * 5.960464477539063e-08 * significand;\n"
"    return mix(1., -1., sign) * (1. + significand * 9.765625e-4) * pow(2.,exponent-15.);\n"
"}\n"
"\n"
"#define NTRK 13\n"
"#define NMOD 137\n"
"#define NPTN 28\n"
"#define NNOT 879\n"
"#define NDRM 49\n"
"\n"
"int trk_sep(int index)      {return int(rfloat(index));}\n"
"int trk_syn(int index)      {return int(rfloat(index+1+1*NTRK));}\n"
"float trk_norm(int index)   {return     rfloat(index+1+2*NTRK);}\n"
"float trk_rel(int index)    {return     rfloat(index+1+3*NTRK);}\n"
"float trk_pre(int index)    {return     rfloat(index+1+4*NTRK);}\n"
"float trk_slide(int index)  {return     rfloat(index+1+5*NTRK);} // idea for future: change to individual note_slide_time\n"
"float mod_on(int index)     {return     rfloat(index+1+6*NTRK);}\n"
"float mod_off(int index)    {return     rfloat(index+1+6*NTRK+1*NMOD);}\n"
"int mod_ptn(int index)      {return int(rfloat(index+1+6*NTRK+2*NMOD));}\n"
"float mod_transp(int index) {return     rfloat(index+1+6*NTRK+3*NMOD);}\n"
"int ptn_sep(int index)      {return int(rfloat(index+1+6*NTRK+4*NMOD));}\n"
"float note_on(int index)    {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN);}\n"
"float note_off(int index)   {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+1*NNOT);}\n"
"float note_pitch(int index) {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+2*NNOT);}\n"
"float note_pan(int index)   {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+3*NNOT);}\n"
"float note_vel(int index)   {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+4*NNOT);}\n"
"float note_slide(int index) {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+5*NNOT);}\n"
"float note_aux(int index)   {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+6*NNOT);}\n"
"float drum_rel(int index)   {return     rfloat(index+2+6*NTRK+4*NMOD+NPTN+7*NNOT);}\n"
"\n"
"vec2 mainSynth(float time)\n"
"{\n"
"    float sL = 0.;\n"
"    float sR = 0.;\n"
"    float dL = 0.;\n"
"    float dR = 0.;\n"
"\n"
"    if (time > 189.3748) return vec2(0);\n"
"    \n"
"    int _it;\n"
"    for(_it = 0; _it < NTIME - 2 && pos_t[_it + 1] < time; _it++);\n"
"    BPS = pos_BPS[_it];\n"
"    SPB = pos_SPB[_it];\n"
"    BT = pos_B[_it] + (time - pos_t[_it]) * BPS;\n"
"\n"
"    float time2 = time - .0002;\n"
"    float sidechain = 1.;\n"
"\n"
"    float amaysynL, amaysynR, amaydrumL, amaydrumR, B, Bon, Boff, Bprog, Bproc, L, tL, _t, _t2, vel, rel, pre, f, amtL, amtR, env, slide, aux;\n"
"    int tsep0, tsep1, _modU, _modL, ptn, psep0, psep1, _noteU, _noteL, syn, drum;\n"
"\n"
"    for(int trk = 0; trk < NTRK; trk++)\n"
"    {\n"
"        tsep0 = trk_sep(trk);\n"
"        tsep1 = trk_sep(trk + 1);\n"
"\n"
"        syn = trk_syn(trk);\n"
"        rel = trk_rel(trk);\n"
"        pre = trk_pre(trk);\n"
"\n"
"        for(_modU = tsep0; (_modU < tsep1 - 1) && (BT > mod_on(_modU + 1) - pre); _modU++);\n"
"        for(_modL = tsep0; (_modL < tsep1 - 1) && (BT >= mod_off(_modL) + rel); _modL++);\n"
"\n"
"        for(int _mod = _modL; _mod <= _modU; _mod++)\n"
"        {\n"
"            B = BT - mod_on(_mod);\n"
"\n"
"            ptn   = mod_ptn(_mod);\n"
"            psep0 = ptn_sep(ptn);\n"
"            psep1 = ptn_sep(ptn + 1);\n"
"\n"
"            for(_noteU = psep0; (_noteU < psep1 - 1) && (B > note_on(_noteU + 1) - pre); _noteU++);\n"
"            for(_noteL = psep0; (_noteL < psep1 - 1) && (B >= note_off(_noteL) + rel); _noteL++);\n"
"\n"
"            for(int _note = _noteL; _note <= _noteU; _note++)\n"
"            {\n"
"                if(syn == 121)\n"
"                {\n"
"                    drum = int(note_pitch(_note));\n"
"                    rel = drum_rel(drum);\n"
"                }\n"
"\n"
"                amaysynL  = 0.;\n"
"                amaysynR  = 0.;\n"
"                amaydrumL = 0.;\n"
"                amaydrumR = 0.;\n"
"\n"
"                Bon   = note_on(_note) - pre;\n"
"                Boff  = note_off(_note) + rel;\n"
"                L     = Boff - Bon;\n"
"                tL    = L * SPB;\n"
"                Bprog = B - Bon;\n"
"                Bproc = Bprog / L;\n"
"                _t    = Bprog * SPB;\n"
"                _t2   = _t - .0002;\n"
"                vel   = note_vel(_note);\n"
"                amtL  = clamp(1. - note_pan(_note), 0., 1.);\n"
"                amtR  = clamp(1. + note_pan(_note), 0., 1.);\n"
"                slide = note_slide(_note);\n"
"                aux   = note_aux(_note);\n"
"\n"
"                if(syn == 121)\n"
"                {\n"
"                    env = trk_norm(trk) * theta(Bprog) * theta(L - Bprog);\n"
"                    if(drum == 0) { sidechain = min(sidechain, 1. - vel * (clamp(1.e4 * Bprog,0.,1.) - pow(Bprog/(L-rel),8.)));}\n"
"                    else if(drum == 1){\n"
"                        amaydrumL = vel*vel*.5*exp(-18.*max(_t-.01,0.))*metalnoise(.6*_t, 1., 2.)\n"
"      +.5*(lpnoise(_t,10000.)*smstep(0.,.01,_t)*(1.-(1.-.13)*smstep(0.,.12,_t-.01))-.3*(1.00*lpnoise((_t-0.00),10000.)*smstep(0.,.01,(_t-0.00))*(1.-(1.-.13)*smstep(0.,.12,(_t-0.00)-.01))+6.10e-01*lpnoise((_t-1.20e-03),10000.)*smstep(0.,.01,(_t-1.20e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-1.20e-03)-.01))+3.72e-01*lpnoise((_t-2.40e-03),10000.)*smstep(0.,.01,(_t-2.40e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-2.40e-03)-.01))))*exp(-3.*max(_t-.2,0.))\n"
"      +2.1*vel*fract(sin(_t*100.*1.)*50000.*1.)*doubleslope(_t,0.,.01,.1)*exp(-10.*Bprog);\n"
"                        amaydrumR = vel*vel*.5*exp(-18.*max(_t2-.01,0.))*metalnoise(.6*_t2, 1., 2.)\n"
"      +.5*(lpnoise(_t,10000.)*smstep(0.,.01,_t)*(1.-(1.-.13)*smstep(0.,.12,_t-.01))-.3*(1.00*lpnoise((_t-0.00),10000.)*smstep(0.,.01,(_t-0.00))*(1.-(1.-.13)*smstep(0.,.12,(_t-0.00)-.01))+6.10e-01*lpnoise((_t-1.20e-03),10000.)*smstep(0.,.01,(_t-1.20e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-1.20e-03)-.01))+3.72e-01*lpnoise((_t-2.40e-03),10000.)*smstep(0.,.01,(_t-2.40e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-2.40e-03)-.01))))*exp(-3.*max(_t2-.2,0.))\n"
"      +2.1*vel*fract(sin(_t2*100.*1.)*50000.*1.)*doubleslope(_t2,0.,.01,.1)*exp(-10.*Bprog);\n"
"                    }\n"
"                    else if(drum == 2){\n"
"                        amaydrumL = vel*vel*1.3*exp(-7.*max(_t-.05+10.*vel,0.))*metalnoise(.6*_t, .5, 2.)\n"
"      +vel*1.3*(lpnoise(_t,10000.)*smstep(0.,.01,_t)*(1.-(1.-.13)*smstep(0.,.12,_t-.01))-.3*(1.00*lpnoise((_t-0.00),10000.)*smstep(0.,.01,(_t-0.00))*(1.-(1.-.13)*smstep(0.,.12,(_t-0.00)-.01))+6.10e-01*lpnoise((_t-1.20e-03),10000.)*smstep(0.,.01,(_t-1.20e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-1.20e-03)-.01))+3.72e-01*lpnoise((_t-2.40e-03),10000.)*smstep(0.,.01,(_t-2.40e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-2.40e-03)-.01))))*exp(-4.*max(_t-.25,0.));\n"
"                        amaydrumR = vel*vel*1.3*exp(-7.*max(_t2-.05+10.*vel,0.))*metalnoise(.6*_t2, .5, 2.)\n"
"      +vel*1.3*(lpnoise(_t,10000.)*smstep(0.,.01,_t)*(1.-(1.-.13)*smstep(0.,.12,_t-.01))-.3*(1.00*lpnoise((_t-0.00),10000.)*smstep(0.,.01,(_t-0.00))*(1.-(1.-.13)*smstep(0.,.12,(_t-0.00)-.01))+6.10e-01*lpnoise((_t-1.20e-03),10000.)*smstep(0.,.01,(_t-1.20e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-1.20e-03)-.01))+3.72e-01*lpnoise((_t-2.40e-03),10000.)*smstep(0.,.01,(_t-2.40e-03))*(1.-(1.-.13)*smstep(0.,.12,(_t-2.40e-03)-.01))))*exp(-4.*max(_t2-.25,0.));\n"
"                    }\n"
"                    else if(drum == 11){\n"
"                        amaydrumL = vel*fract(sin(_t*100.*.5)*50000.*.5)*doubleslope(_t,0.,.03,.1)*exp(-13.*Bprog);\n"
"                        amaydrumR = vel*fract(sin(_t2*100.*.5)*50000.*.5)*doubleslope(_t2,0.,.03,.1)*exp(-13.*Bprog);\n"
"                    }\n"
"                    else if(drum == 28){\n"
"                        amaydrumL = vel*(_BOOMENV0(_t)*(1.6*(.5*_sin_(drop_phase(_t,.046,273.108,73.441),1.7*_BOOMENV0(_t)*lpnoise(_t,452.603))+.5*_sin_(.983*drop_phase(_t,.046,273.108,73.441),1.7*_BOOMENV0(_t)*lpnoise(_t,452.603))))+_BOOMENV1(_t)*(1.25*lpnoise(_t,452.603))+_BOOMENV2(_t)*(1.45*lpnoise(_t,212.15))+_BOOMENV3(_t)*(1.85*lpnoise(_t,141.624)));\n"
"                        amaydrumR = vel*(_BOOMENV0(_t)*(1.6*(.5*_sin_(drop_phase((_t-.00089),.046,273.108,73.441),1.7*_BOOMENV0(_t)*lpnoise((_t-.00089),452.603))+.5*_sin_(.983*drop_phase((_t-.00089),.046,273.108,73.441),1.7*_BOOMENV0(_t)*lpnoise((_t-.00089),452.603))))+_BOOMENV1(_t)*(1.25*lpnoise((_t-.00011),452.603))+_BOOMENV2(_t)*(1.45*lpnoise((_t-.00173),212.15))+_BOOMENV3(_t)*(1.85*lpnoise((_t-.002),141.624)));\n"
"                    }\n"
"                    else if(drum == 32){\n"
"                        amaydrumL = vel*protokick(_t,242.,55.,.036,.088,.0666,1.42,.01,.45,.1,.15,.5)\n"
"      +.66*protokick(_t,3333.,340.,.008,0.,.01,2.,2.4,0.,.2,.3,1.);\n"
"                        amaydrumR = vel*protokick(_t2,242.,55.,.036,.088,.0666,1.42,.01,.45,.1,.15,.5)\n"
"      +.66*protokick(_t2,3333.,340.,.008,0.,.01,2.,2.4,0.,.2,.3,1.);\n"
"                    }\n"
"                    \n"
"                    if(drum > 0)\n"
"                    {\n"
"                        dL += amtL * s_atan(env * amaydrumL);\n"
"                        dR += amtR * s_atan(env * amaydrumR);\n"
"                    }\n"
"                }\n"
"                else\n"
"                {\n"
"                    f = freqC1(note_pitch(_note) + mod_transp(_mod));\n"
"\n"
"                    if(abs(slide) > 1e-3) // THIS IS SLIDEY BIZ\n"
"                    {\n"
"                        float Bslide = trk_slide(trk);\n"
"                        float fac = slide * log(2.)/12.;\n"
"                        if (Bprog <= Bslide)\n"
"                        {\n"
"                            float help = 1. - Bprog/Bslide;\n"
"                            f *= Bslide * (fhelp(fac) - help * fhelp(fac*help*help)) / Bprog;\n"
"                        }\n"
"                        else\n"
"                        {\n"
"                            f *= 1. + (Bslide * (fhelp(fac)-1.)) / Bprog;\n"
"                        }\n"
"                    }\n"
"\n"
"                    env = theta(Bprog) * (1. - smstep(Boff-rel, Boff, B));\n"
"                    if(syn == 0){amaysynL = _sin(f*_t); amaysynR = _sin(f*_t2);}\n"
"                    else if(syn == 22){\n"
"                        \n"
"                        amaysynL = (theta(Bprog)*exp(-11.*Bprog)*env_AHDSR(Bprog,L,.01,0.,.1+.5*vel,.01,.4)*clip((1.+theta(Bprog)*exp(-11.*Bprog))*_tri(f*_t+.2*env_AHDSR(Bprog,L,.5,1.,.1,1.,0.)*clip((1.+3.)*_sq_(1.99*f*_t,.3+2.*vel+.2*(2.*fract(3.97*f*_t)-1.)))+.2*vel*env_AHDSR(Bprog,L,.325,1.,.1,1.,0.)*(2.*fract(3.97*f*_t)-1.)))+.4*theta(Bprog)*exp(-11.*Bprog)*env_AHDSR(Bprog,L,.325,1.,.1,1.,0.)*clip((1.+3.)*_sq_(1.99*f*_t,.3+2.*vel+.2*(2.*fract(3.97*f*_t)-1.)))*env_AHDSR(Bprog,L,0.,0.,.2+.2*vel,.01,.4)+.4*env_AHDSR(Bprog,L,0.,0.,.05,0.,0.)*lpnoise(_t+0.,6000.+200.*note_pitch(_note)));\n"
"                        amaysynR = (theta(Bprog)*exp(-11.*Bprog)*env_AHDSR(Bprog,L,.01,0.,.1+.5*vel,.01,.4)*clip((1.+theta(Bprog)*exp(-11.*Bprog))*_tri(f*_t2+.2*env_AHDSR(Bprog,L,.5,1.,.1,1.,0.)*clip((1.+3.)*_sq_(1.99*f*_t2,.3+2.*vel+.2*(2.*fract(3.97*f*_t2)-1.)))+.2*vel*env_AHDSR(Bprog,L,.325,1.,.1,1.,0.)*(2.*fract(3.97*f*_t2)-1.)))+.4*theta(Bprog)*exp(-11.*Bprog)*env_AHDSR(Bprog,L,.325,1.,.1,1.,0.)*clip((1.+3.)*_sq_(1.99*f*_t2,.3+2.*vel+.2*(2.*fract(3.97*f*_t2)-1.)))*env_AHDSR(Bprog,L,0.,0.,.2+.2*vel,.01,.4)+.4*env_AHDSR(Bprog,L,0.,0.,.05,0.,0.)*lpnoise(_t2+0.,6000.+200.*note_pitch(_note)));\n"
"env = theta(Bprog)*pow(1.-smstep(Boff-rel, Boff, B),2);\n"
"                    }\n"
"                    else if(syn == 59){\n"
"                        \n"
"                        amaysynL = fqmbace5_volume(BT)*(vel*QFM(_t,f,0.,.00787*71.,.00787*52.,.00787*91.,.00787*99.,.5,1.,1.001,1.,.00787*49.,.00787*104.,.00787*65.,.00787*90.,7.)*env_AHDSR(_t,tL,.023,0.,.01,1.,.006));\n"
"                        amaysynR = fqmbace5_volume(BT)*(vel*QFM(_t2,f,0.,.00787*71.,.00787*52.,.00787*91.,.00787*99.,.5,1.,1.001,1.,.00787*49.,.00787*104.,.00787*65.,.00787*90.,7.)*env_AHDSR(_t2,tL,.023,0.,.01,1.,.006));\n"
"                    }\n"
"                    else if(syn == 64){\n"
"                        time2 = time-.03; _t2 = _t-.03;\n"
"                        amaysynL = fqmbace7sat_vol(BT)*s_atan(4.*(vel*2.5*QFM(_t,.993*f,0.,.00787*24.,.00787*92.,.00787*85.,.00787*21.,.5,1.,1.001,1.,.00787*126.,.00787*48.,.00787*26.,.00787*26.,9.)*env_AHDSRexp(_t,tL,.13,0.,.01,1.,.008)+vel*2.5*QFM(_t,f,0.,.00787*24.,.00787*92.,.00787*85.,.00787*21.,.5,1.,1.001,1.,.00787*126.,.00787*48.,.00787*26.,.00787*26.,9.)*env_AHDSRexp(_t,tL,.3,0.,.01,1.,.008)));\n"
"                        amaysynR = fqmbace7sat_vol(BT)*s_atan(4.*(vel*2.5*QFM(_t2,.993*f,0.,.00787*24.,.00787*92.,.00787*85.,.00787*21.,.5,1.,1.001,1.,.00787*126.,.00787*48.,.00787*26.,.00787*26.,9.)*env_AHDSRexp(_t2,tL,.13,0.,.01,1.,.008)+vel*2.5*QFM(_t2,f,0.,.00787*24.,.00787*92.,.00787*85.,.00787*21.,.5,1.,1.001,1.,.00787*126.,.00787*48.,.00787*26.,.00787*26.,9.)*env_AHDSRexp(_t2,tL,.3,0.,.01,1.,.008)));\n"
"env = theta(Bprog)*pow(1.-smstep(Boff-rel, Boff, B),4);\n"
"                    }\n"
"                    else if(syn == 91){\n"
"                        time2 = time-.1; _t2 = _t-.1;\n"
"                        amaysynL = sinshape((QFM(_t,f,0.,.00787*125.,.00787*env_AHDSRexp(Bprog,L,.0001,.097,.244,.195,0.)*88.,.00787*env_AHDSRexp(Bprog,L,.0001,.134,.246,.471,0.)*120.,.00787*env_AHDSRexp(Bprog,L,.0001,.051,.162,.161,0.)*91.,.999,1.,1.+.0939*(.5+(.5*_sin(.3*Bprog))),2.,.00787*101.,.00787*86.,.00787*1.,.00787*98.,8.)*env_AHDSRexp(Bprog,L,.0001,.032,.185,.109,.048)),.5,7.);\n"
"                        amaysynR = sinshape((QFM(_t2,f,0.,.00787*125.,.00787*env_AHDSRexp(Bprog,L,.0001,.097,.244,.195,0.)*88.,.00787*env_AHDSRexp(Bprog,L,.0001,.134,.246,.471,0.)*120.,.00787*env_AHDSRexp(Bprog,L,.0001,.051,.162,.161,0.)*91.,.999,1.,1.+.0939*(.5+(.5*_sin(.3*Bprog))),2.,.00787*101.,.00787*86.,.00787*1.,.00787*98.,8.)*env_AHDSRexp(Bprog,L,.0001,.032,.185,.109,.048)),.5,7.);\n"
"env = theta(Bprog)*pow(1.-smstep(Boff-rel, Boff, B),10);\n"
"                    }\n"
"                    else if(syn == 101){\n"
"                        \n"
"                        amaysynL = fett2_volume(BT)*env_AHDSRexp(Bprog,L,.05,0.,.05,.8,.5)*s_atan(23.*(s_atan(MADD(_t,.5*f,.5*lpnoise(_t + 0.,500.)*exp(-10.*Bprog)+env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3)*(.5+(.5*_sin(4.2*BT))),8,1,(.4+(.6*_sin(.21*Bprog))),2000.*env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3),100.,5.,100.,.001,.7,0.,0)+MADD(_t,1.01*.5*f,.5*lpnoise(_t + 0.,500.)*exp(-10.*Bprog)+env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3)*(.5+(.5*_sin(4.2*BT))),8,1,(.4+(.6*_sin(.21*Bprog))),2000.*env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3),100.,5.,100.,.001,.7,0.,0)+MADD(_t,.499*.5*f,.5*lpnoise(_t + 0.,500.)*exp(-10.*Bprog)+env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3)*(.5+(.5*_sin(4.2*BT))),8,1,(.4+(.6*_sin(.21*Bprog))),2000.*env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3),100.,5.,100.,.001,.7,0.,0))+.1*exp(-10.*Bprog)*lpnoise(_t + 0.,500.)));\n"
"                        amaysynR = fett2_volume(BT)*env_AHDSRexp(Bprog,L,.05,0.,.05,.8,.5)*s_atan(23.*(s_atan(MADD(_t2,.5*f,.5*lpnoise(_t2 + 0.,500.)*exp(-10.*Bprog)+env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3)*(.5+(.5*_sin(4.2*BT))),8,1,(.4+(.6*_sin(.21*Bprog))),2000.*env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3),100.,5.,100.,.001,.7,0.,0)+MADD(_t2,1.01*.5*f,.5*lpnoise(_t2 + 0.,500.)*exp(-10.*Bprog)+env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3)*(.5+(.5*_sin(4.2*BT))),8,1,(.4+(.6*_sin(.21*Bprog))),2000.*env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3),100.,5.,100.,.001,.7,0.,0)+MADD(_t2,.499*.5*f,.5*lpnoise(_t2 + 0.,500.)*exp(-10.*Bprog)+env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3)*(.5+(.5*_sin(4.2*BT))),8,1,(.4+(.6*_sin(.21*Bprog))),2000.*env_AHDSRexp(Bprog,L,.7,0.,.3,.3,.3),100.,5.,100.,.001,.7,0.,0))+.1*exp(-10.*Bprog)*lpnoise(_t2 + 0.,500.)));\n"
"env = theta(Bprog)*pow(1.-smstep(Boff-rel, Boff, B),8);\n"
"                    }\n"
"                    else if(syn == 109){\n"
"                        time2 = time-2e-3; _t2 = _t-2e-3;\n"
"                        amaysynL = (s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-0.0*(1.+3.*_sin(1.4*_t))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-0.0*(1.+3.*_sin(1.4*_t))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t-0.0*(1.+3.*_sin(1.4*_t))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-0.0*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-1.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-1.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t-1.0e-05*(1.+3.*_sin(1.4*_t))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-1.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-2.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-2.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t-2.0e-05*(1.+3.*_sin(1.4*_t))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-2.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-3.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-3.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t-3.0e-05*(1.+3.*_sin(1.4*_t))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-3.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-4.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t-4.0e-05*(1.+3.*_sin(1.4*_t))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t-4.0e-05*(1.+3.*_sin(1.4*_t))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t-4.0e-05*(1.+3.*_sin(1.4*_t)))+.35*(.5+(.5*_sin(.5*Bprog))))))));\n"
"                        amaysynR = (s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-0.0*(1.+3.*_sin(1.4*_t2))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-0.0*(1.+3.*_sin(1.4*_t2))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t2-0.0*(1.+3.*_sin(1.4*_t2))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-0.0*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-1.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-1.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-1.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-2.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-2.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-2.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-3.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-3.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-3.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))))\n"
"      +s_atan(1.*(.25*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(.51*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+.76*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*clip((1.+4.*(.5+(.5*_sin(.2*BT)))*(.5+(.5*_sin(.21*BT))))*_tri(f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.4+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-4.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,3961.)*.1))+(.5+(.5*_sin(.2*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_tri(1.995*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.15*(.5+(.5*_sin(.5*Bprog)))+.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*lpnoise((_t2-4.0e-05*(1.+3.*_sin(1.4*_t2))) + 0.,2142.)*.1)+.62*(.5+(.5*_sin(.21*BT)))*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*(2.*fract(2.011*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.1+.5*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog)))))-1.)+.27*clamp(1.+(.03-Bprog)/(.1),exp(-7.*Bprog),1.)*_sin_(.52*f+env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*(.5+(.5*_sin(.5*Bprog)))*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2))),.4+.25*(.5+(.5*_sin(.5*Bprog)))*.22*env_AHDSRexp(Bprog,L,.025,0.,.1,.3,0.)*_tri(.51*f*(_t2-4.0e-05*(1.+3.*_sin(1.4*_t2)))+.35*(.5+(.5*_sin(.5*Bprog))))))));\n"
"                    }\n"
"                    else if(syn == 111){\n"
"                        time2 = time-0.02; _t2 = _t-0.02;\n"
"                        amaysynL = fett2_volume(BT)*((MADD((_t-0.0*(1.+2.*_sin(.013*_t))),f,0.,12,1,.92,2513.*env_AHDSRexp(Bprog,L,.031,0.,.1,1.,0.3),65.1,1.,3.,.008,.25,0.,1)*env_AHDSRexp(Bprog,L,.145,0.,.1,1.,0.3))\n"
"      +(MADD((_t-4.0e-02*(1.+2.*_sin(.013*_t))),f,0.,12,1,.92,2513.*env_AHDSRexp(Bprog,L,.031,0.,.1,1.,0.3),65.1,1.,3.,.008,.25,0.,1)*env_AHDSRexp(Bprog,L,.145,0.,.1,1.,0.3))\n"
"      +(MADD((_t-8.0e-02*(1.+2.*_sin(.013*_t))),f,0.,12,1,.92,2513.*env_AHDSRexp(Bprog,L,.031,0.,.1,1.,0.3),65.1,1.,3.,.008,.25,0.,1)*env_AHDSRexp(Bprog,L,.145,0.,.1,1.,0.3)));\n"
"                        amaysynR = fett2_volume(BT)*((MADD((_t2-0.0*(1.+2.*_sin(.013*_t2))),f,0.,12,1,.92,2513.*env_AHDSRexp(Bprog,L,.031,0.,.1,1.,0.3),65.1,1.,3.,.008,.25,0.,1)*env_AHDSRexp(Bprog,L,.145,0.,.1,1.,0.3))\n"
"      +(MADD((_t2-4.0e-02*(1.+2.*_sin(.013*_t2))),f,0.,12,1,.92,2513.*env_AHDSRexp(Bprog,L,.031,0.,.1,1.,0.3),65.1,1.,3.,.008,.25,0.,1)*env_AHDSRexp(Bprog,L,.145,0.,.1,1.,0.3))\n"
"      +(MADD((_t2-8.0e-02*(1.+2.*_sin(.013*_t2))),f,0.,12,1,.92,2513.*env_AHDSRexp(Bprog,L,.031,0.,.1,1.,0.3),65.1,1.,3.,.008,.25,0.,1)*env_AHDSRexp(Bprog,L,.145,0.,.1,1.,0.3)));\n"
"env = theta(Bprog)*pow(1.-smstep(Boff-rel, Boff, B),4);\n"
"                    }\n"
"                    else if(syn == 117){\n"
"                        time2 = time-.1; _t2 = _t-.1;\n"
"                        amaysynL = fett2_volume(BT)*smstep(0.,.24975*(2.-vel+1e-3),Bprog)*(s_atan(QFM((_t-0.0*(1.+3.*_sin(.05*_t))),f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t-0.0*(1.+3.*_sin(.05*_t))),1.003*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t-0.0*(1.+3.*_sin(.05*_t))),.992*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.))\n"
"      +s_atan(QFM((_t-4.0e-03*(1.+3.*_sin(.05*_t))),f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t-4.0e-03*(1.+3.*_sin(.05*_t))),1.003*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t-4.0e-03*(1.+3.*_sin(.05*_t))),.992*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.))\n"
"      +s_atan(QFM((_t-8.0e-03*(1.+3.*_sin(.05*_t))),f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t-8.0e-03*(1.+3.*_sin(.05*_t))),1.003*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t-8.0e-03*(1.+3.*_sin(.05*_t))),.992*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)));\n"
"                        amaysynR = fett2_volume(BT)*smstep(0.,.24975*(2.-vel+1e-3),Bprog)*(s_atan(QFM((_t2-0.0*(1.+3.*_sin(.05*_t2))),f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t2-0.0*(1.+3.*_sin(.05*_t2))),1.003*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t2-0.0*(1.+3.*_sin(.05*_t2))),.992*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.))\n"
"      +s_atan(QFM((_t2-4.0e-03*(1.+3.*_sin(.05*_t2))),f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t2-4.0e-03*(1.+3.*_sin(.05*_t2))),1.003*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t2-4.0e-03*(1.+3.*_sin(.05*_t2))),.992*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.))\n"
"      +s_atan(QFM((_t2-8.0e-03*(1.+3.*_sin(.05*_t2))),f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t2-8.0e-03*(1.+3.*_sin(.05*_t2))),1.003*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)+QFM((_t2-8.0e-03*(1.+3.*_sin(.05*_t2))),.992*f,0.,.00787*127.,.00787*111.,.00787*127.,.00787*95.,1.,4.,1.,.5,.00787*55.,.00787*12.,.00787*56.,.00787*26.,9.)));\n"
"env = theta(Bprog)*pow(1.-smstep(Boff-rel, Boff, B),3);\n"
"                    }\n"
"                    else if(syn == 118){\n"
"                        time2 = time-0.008; _t2 = _t-0.008;\n"
"                        amaysynL = (1.0*(s_atan(10.*env_AHDSRexp((Bprog-0.000),L,0.,0.,.2,0.,1.)*QFM(((_t-SPB*0.000)-0.0*(1.+.5*_sin(.32*(_t-SPB*0.000)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))\n"
"      +s_atan(10.*env_AHDSRexp((Bprog-0.000),L,0.,0.,.2,0.,1.)*QFM(((_t-SPB*0.000)-1.0e-02*(1.+.5*_sin(.32*(_t-SPB*0.000)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.)))\n"
"      +2.0e-01*(s_atan(10.*env_AHDSRexp((Bprog-3.330e-01),L,0.,0.,.2,0.,1.)*QFM(((_t-SPB*3.330e-01)-0.0*(1.+.5*_sin(.32*(_t-SPB*3.330e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))\n"
"      +s_atan(10.*env_AHDSRexp((Bprog-3.330e-01),L,0.,0.,.2,0.,1.)*QFM(((_t-SPB*3.330e-01)-1.0e-02*(1.+.5*_sin(.32*(_t-SPB*3.330e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.)))\n"
"      +4.0e-02*(s_atan(10.*env_AHDSRexp((Bprog-6.660e-01),L,0.,0.,.2,0.,1.)*QFM(((_t-SPB*6.660e-01)-0.0*(1.+.5*_sin(.32*(_t-SPB*6.660e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))\n"
"      +s_atan(10.*env_AHDSRexp((Bprog-6.660e-01),L,0.,0.,.2,0.,1.)*QFM(((_t-SPB*6.660e-01)-1.0e-02*(1.+.5*_sin(.32*(_t-SPB*6.660e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))));\n"
"                        amaysynR = (1.0*(s_atan(10.*env_AHDSRexp((Bprog-0.000),L,0.,0.,.2,0.,1.)*QFM(((_t2-SPB*0.000)-0.0*(1.+.5*_sin(.32*(_t2-SPB*0.000)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))\n"
"      +s_atan(10.*env_AHDSRexp((Bprog-0.000),L,0.,0.,.2,0.,1.)*QFM(((_t2-SPB*0.000)-1.0e-02*(1.+.5*_sin(.32*(_t2-SPB*0.000)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.)))\n"
"      +2.0e-01*(s_atan(10.*env_AHDSRexp((Bprog-3.330e-01),L,0.,0.,.2,0.,1.)*QFM(((_t2-SPB*3.330e-01)-0.0*(1.+.5*_sin(.32*(_t2-SPB*3.330e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))\n"
"      +s_atan(10.*env_AHDSRexp((Bprog-3.330e-01),L,0.,0.,.2,0.,1.)*QFM(((_t2-SPB*3.330e-01)-1.0e-02*(1.+.5*_sin(.32*(_t2-SPB*3.330e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.)))\n"
"      +4.0e-02*(s_atan(10.*env_AHDSRexp((Bprog-6.660e-01),L,0.,0.,.2,0.,1.)*QFM(((_t2-SPB*6.660e-01)-0.0*(1.+.5*_sin(.32*(_t2-SPB*6.660e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))\n"
"      +s_atan(10.*env_AHDSRexp((Bprog-6.660e-01),L,0.,0.,.2,0.,1.)*QFM(((_t2-SPB*6.660e-01)-1.0e-02*(1.+.5*_sin(.32*(_t2-SPB*6.660e-01)))),f,0.,.00787*113.,.00787*86.,.00787*113.,.00787*86.,1.,3.5,1.,3.5,.00787*0.,.00787*0.,.00787*0.,.00787*0.,8.))));\n"
"                    }\n"
"                    else if(syn == 119){\n"
"                        time2 = time-3e-3; _t2 = _t-3e-3;\n"
"                        amaysynL = hoboe_vol(BT)*env_AHDSRexp(Bprog,L,.125,0.,.125,.5,.7)*MADD(_t,f,.3*lpnoise(_t + 0.,3300.)+env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*(.5+(.5*_sin(7.*env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*Bprog))),8,1,-2.,600.,10.,.4,100.,.006,3.,0.,0)\n"
"      +hoboe_vol(BT)*.7*env_AHDSRexp(Bprog,L,.125,0.,.125,.5,.7)*MADD(_t,2.*f,.3*lpnoise(_t + 0.,3300.),16,1,-2.,10000.,100.,.4,100.,.001*env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*(.5+(.5*_sin(7.*env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*Bprog))),7.,0.,0);\n"
"                        amaysynR = hoboe_vol(BT)*env_AHDSRexp(Bprog,L,.125,0.,.125,.5,.7)*MADD(_t2,f,.3*lpnoise(_t2 + 0.,3300.)+env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*(.5+(.5*_sin(7.*env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*Bprog))),8,1,-2.,600.,10.,.4,100.,.006,3.,0.,0)\n"
"      +hoboe_vol(BT)*.7*env_AHDSRexp(Bprog,L,.125,0.,.125,.5,.7)*MADD(_t2,2.*f,.3*lpnoise(_t2 + 0.,3300.),16,1,-2.,10000.,100.,.4,100.,.001*env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*(.5+(.5*_sin(7.*env_AHDSR(Bprog,L,2.4,0.,.1,1.,.3)*Bprog))),7.,0.,0);\n"
"                    }\n"
"                    \n"
"                    sL += amtL * trk_norm(trk) * s_atan(clamp(env,0.,1.) * amaysynL);\n"
"                    sR += amtR * trk_norm(trk) * s_atan(clamp(env,0.,1.) * amaysynR);\n"
"                }\n"
"            }\n"
"        }\n"
"    }\n"
"    float masterL = .26 * sidechain * s_atan(sL) + .8 * dL;\n"
"    float masterR = .26 * sidechain * s_atan(sR) + .8 * dR;\n"
"    return vec2(\n"
"        (BT > 77 && BT < 80) ? (1. - 0.26*(BT-77.)) * masterL: masterL,\n"
"        (BT > 77 && BT < 80) ? (1. - 0.26*(BT-77.)) * masterR: masterR);\n"
"}\n"
"\n"
"void main()\n"
"{\n"
"    Tsample = 1./iSampleRate;\n"
"    float t = (iBlockOffset + gl_FragCoord.x + gl_FragCoord.y*iTexSize) * Tsample;\n"
"    vec2 s = mainSynth(t);\n"
"    vec2 v  = floor((0.5+0.5*s)*65535.0);\n"
"    vec2 vl = mod(v,256.0)/255.0;\n"
"    vec2 vh = floor(v/256.0)/255.0;\n"
"    gl_FragColor = vec4(vl.x,vh.x,vl.y,vh.y);\n"
"}\n"
"\n"
;
#endif
